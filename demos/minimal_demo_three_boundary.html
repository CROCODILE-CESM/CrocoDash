

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Set up a three boundary regional CESM-MOM6 run &mdash; CrocoDash  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Set up a low res three boundary regional CESM-MOM6 run" href="minimal_demo_three_boundary_from_t232.html" />
    <link rel="prev" title="Set up a global gridded subset regional CESM-MOM6 run" href="minimal_demo_subset_global.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CrocoDash
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../demos.html">Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_rect.html">Set up a rectangular regional CESM-MOM6 run</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_rect.html#SECTION-1:-Generate-a-regional-MOM6-domain">SECTION 1: Generate a regional MOM6 domain</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_rect.html#SECTION-2:-Create-the-CESM-case">SECTION 2: Create the CESM case</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_rect.html#Section-3:-Prepare-ocean-forcing-data">Section 3: Prepare ocean forcing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_rect.html#Section-4:-Build-and-run-the-case">Section 4: Build and run the case</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_subset_global.html">Set up a global gridded subset regional CESM-MOM6 run</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_subset_global.html#SECTION-1:-Generate-a-regional-MOM6-domain">SECTION 1: Generate a regional MOM6 domain</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_subset_global.html#SECTION-2:-Create-the-CESM-case">SECTION 2: Create the CESM case</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_subset_global.html#Section-3:-Prepare-ocean-forcing-data">Section 3: Prepare ocean forcing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_subset_global.html#Section-4:-Build-and-run-the-case">Section 4: Build and run the case</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Set up a three boundary regional CESM-MOM6 run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#SECTION-1:-Generate-a-regional-MOM6-domain">SECTION 1: Generate a regional MOM6 domain</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Step-1.1:-Horizontal-Grid">Step 1.1: Horizontal Grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-1.2:-Topography">Step 1.2: Topography</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-1.3:-Vertical-Grid">Step 1.3: Vertical Grid</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#SECTION-2:-Create-the-CESM-case">SECTION 2: Create the CESM case</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Step-2.2:-Create-the-Case">Step 2.2: Create the Case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Section-3:-Prepare-ocean-forcing-data">Section 3: Prepare ocean forcing data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Step-3.1-Configure-Initial-Conditions-and-Forcings">Step 3.1 Configure Initial Conditions and Forcings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-3.2-Run-get_glorys_data.sh">Step 3.2 Run <code class="docutils literal notranslate"><span class="pre">get_glorys_data.sh</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Step-3.3:-Process-forcing-data">Step 3.3: Process forcing data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Section-4:-Build-and-run-the-case">Section 4: Build and run the case</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_three_boundary_from_t232.html">Set up a low res three boundary regional CESM-MOM6 run</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_three_boundary_from_t232.html#SECTION-1:-Generate-a-regional-MOM6-domain">SECTION 1: Generate a regional MOM6 domain</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_three_boundary_from_t232.html#SECTION-2:-Create-the-CESM-case">SECTION 2: Create the CESM case</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_three_boundary_from_t232.html#Section-3:-Prepare-ocean-forcing-data">Section 3: Prepare ocean forcing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_demo_three_boundary_from_t232.html#Section-4:-Build-and-run-the-case">Section 4: Build and run the case</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo_add_grids.html">Set up a Regional MOM6 case with your own grids!</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo_search_data_products.html">The CrocoDash Data Access Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Additional Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-docs/modules.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CrocoDash</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../demos.html">Demos</a></li>
      <li class="breadcrumb-item active">Set up a three boundary regional CESM-MOM6 run</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/demos/minimal_demo_three_boundary.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Set-up-a-three-boundary-regional-CESM-MOM6-run">
<h1>Set up a three boundary regional CESM-MOM6 run<a class="headerlink" href="#Set-up-a-three-boundary-regional-CESM-MOM6-run" title="Link to this heading"></a></h1>
<p>A typical workflow of utilizing CrocoDash consists of four main steps:</p>
<ol class="arabic simple">
<li><p>Generate a regional MOM6 domain.</p></li>
<li><p>Create the CESM case.</p></li>
<li><p>Prepare ocean forcing data.</p></li>
<li><p>Build and run the case.</p></li>
</ol>
</section>
<section id="SECTION-1:-Generate-a-regional-MOM6-domain">
<h1>SECTION 1: Generate a regional MOM6 domain<a class="headerlink" href="#SECTION-1:-Generate-a-regional-MOM6-domain" title="Link to this heading"></a></h1>
<p>We begin by defining a regional MOM6 domain using CrocoDash. To do so, we first carve out a subdomain from a 1/12 degree global grid. We then generate the topography by remapping an existing bathymetric dataset to our horizontal grid. Finally, we define a vertical grid.</p>
<section id="Step-1.1:-Horizontal-Grid">
<h2>Step 1.1: Horizontal Grid<a class="headerlink" href="#Step-1.1:-Horizontal-Grid" title="Link to this heading"></a></h2>
<p>Extract a subgrid from a global grid using the <code class="docutils literal notranslate"><span class="pre">subgrid_from_supergrid</span></code> method:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">CrocoDash.grid</span><span class="w"> </span><span class="kn">import</span> <span class="n">Grid</span>

<span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="o">.</span><span class="n">subgrid_from_supergrid</span><span class="p">(</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/glade/work/fredc/cesm/grid/MOM6/tx1_12v1/gridgen/ocean_hgrid_trimmed.nc&quot;</span><span class="p">,</span>  <span class="c1"># supergrid</span>
    <span class="n">llc</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">99</span><span class="p">),</span>  <span class="c1"># (l)ower (l)eft (c)orner coords</span>
    <span class="n">urc</span> <span class="o">=</span> <span class="p">(</span><span class="mi">59</span><span class="p">,</span> <span class="o">-</span><span class="mf">36.</span><span class="p">),</span>  <span class="c1"># (u)pper (r)ight (c)orner coords</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;nwa12&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Step-1.2:-Topography">
<h2>Step 1.2: Topography<a class="headerlink" href="#Step-1.2:-Topography" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">CrocoDash.topo</span><span class="w"> </span><span class="kn">import</span> <span class="n">Topo</span>

<span class="n">topo</span> <span class="o">=</span> <span class="n">Topo</span><span class="p">(</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span><span class="p">,</span>
    <span class="n">min_depth</span> <span class="o">=</span> <span class="mf">9.5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bathymetry_path</span><span class="o">=</span><span class="s1">&#39;/glade/work/altuntas/croc/input/GEBCO_2024_coarse_x4.nc&#39;</span>

<span class="n">topo</span><span class="o">.</span><span class="n">interpolate_from_file</span><span class="p">(</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">bathymetry_path</span><span class="p">,</span>
    <span class="n">longitude_coordinate_name</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
    <span class="n">latitude_coordinate_name</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">vertical_coordinate_name</span><span class="o">=</span><span class="s2">&quot;elevation&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Begin regridding bathymetry...

Original bathymetry size: 104.42 Mb
Regridded size: 14.67 Mb
Automatic regridding may fail if your domain is too big! If this process hangs or crashes,open a terminal with appropriate computational and resources try calling ESMF directly in the input directory None via

`mpirun -np NUMBER_OF_CPUS ESMF_Regrid -s bathymetry_original.nc -d bathymetry_unfinished.nc -m bilinear --src_var depth --dst_var depth --netcdf4 --src_regional --dst_regional`

For details see https://xesmf.readthedocs.io/en/latest/large_problems_on_HPC.html

Afterwards, run the &#39;expt.tidy_bathymetry&#39; method to skip the expensive interpolation step, and finishing metadata, encoding and cleanup.



Regridding successful! Now calling `tidy_bathymetry` method for some finishing touches...
Tidy bathymetry: Reading in regridded bathymetry to fix up metadata...done. Filling in inland lakes and channels... done.
setup bathymetry has finished successfully.
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x1471cd720c50&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/demos_minimal_demo_three_boundary_7_1.png" src="../_images/demos_minimal_demo_three_boundary_7_1.png" />
</div>
</div>
<p><strong>TODO:</strong> Implement a subset_global_topo-like method in mom6 and use it for this example instead of interpolation.</p>
</section>
<section id="Step-1.3:-Vertical-Grid">
<h2>Step 1.3: Vertical Grid<a class="headerlink" href="#Step-1.3:-Vertical-Grid" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">CrocoDash.vgrid</span><span class="w"> </span><span class="kn">import</span> <span class="n">VGrid</span>

<span class="n">vgrid</span>  <span class="o">=</span> <span class="n">VGrid</span><span class="o">.</span><span class="n">hyperbolic</span><span class="p">(</span>
    <span class="n">nk</span> <span class="o">=</span> <span class="mi">75</span><span class="p">,</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">max_depth</span><span class="p">,</span>
    <span class="n">ratio</span><span class="o">=</span><span class="mf">20.0</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="SECTION-2:-Create-the-CESM-case">
<h1>SECTION 2: Create the CESM case<a class="headerlink" href="#SECTION-2:-Create-the-CESM-case" title="Link to this heading"></a></h1>
<p>After generating the MOM6 domain, the next step is to create a CESM case using CrocoDash. This process is straightforward and involves instantiating the CrocoDash Case object. The Case object requires the following inputs:</p>
<ul class="simple">
<li><p>CESM Source Directory: A local path to a compatible CESM source copy.</p></li>
<li><p>Case Name: A unique name for the CESM case.</p></li>
<li><p>Input Directory: The directory where all necessary input files will be written.</p></li>
<li><p>MOM6 Domain Objects: The horizontal grid, topography, and vertical grid created in the previous section.</p></li>
<li><p>Project ID: (Optional) A project ID, if required by the machine.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CESM case (experiment) name</span>
<span class="n">casename</span> <span class="o">=</span> <span class="s2">&quot;three-boundary-nwa&quot;</span>

<span class="c1"># CESM source root (Update this path accordingly!!!)</span>
<span class="n">cesmroot</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span><span class="s2">&quot;clean_cesm3_0_alpha03a&quot;</span>

<span class="c1"># Place where all your input files go</span>
<span class="n">inputdir</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;croc_input&quot;</span> <span class="o">/</span> <span class="n">casename</span>

<span class="c1"># CESM case directory</span>
<span class="n">caseroot</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;croc_cases&quot;</span> <span class="o">/</span> <span class="n">casename</span>
</pre></div>
</div>
</div>
<section id="Step-2.2:-Create-the-Case">
<h2>Step 2.2: Create the Case<a class="headerlink" href="#Step-2.2:-Create-the-Case" title="Link to this heading"></a></h2>
<p>To create the CESM case, instantiate the <code class="docutils literal notranslate"><span class="pre">Case</span></code> object as shown below. This will automatically set up the CESM case based on the provided inputs: The <code class="docutils literal notranslate"><span class="pre">cesmroot</span></code> argument specifies the path to your local CESM source directory. The <code class="docutils literal notranslate"><span class="pre">caseroot</span></code> argument defines the directory where the case will be created. CrocoDash will handle all necessary namelist modifications and XML changes to align with the MOM6 domain objects generated earlier.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">CrocoDash.case</span><span class="w"> </span><span class="kn">import</span> <span class="n">Case</span>

<span class="n">case</span> <span class="o">=</span> <span class="n">Case</span><span class="p">(</span>
    <span class="n">cesmroot</span> <span class="o">=</span> <span class="n">cesmroot</span><span class="p">,</span>
    <span class="n">caseroot</span> <span class="o">=</span> <span class="n">caseroot</span><span class="p">,</span>
    <span class="n">inputdir</span> <span class="o">=</span> <span class="n">inputdir</span><span class="p">,</span>
    <span class="n">ocn_grid</span> <span class="o">=</span> <span class="n">grid</span><span class="p">,</span>
    <span class="n">ocn_vgrid</span> <span class="o">=</span> <span class="n">vgrid</span><span class="p">,</span>
    <span class="n">ocn_topo</span> <span class="o">=</span> <span class="n">topo</span><span class="p">,</span>
    <span class="n">project</span> <span class="o">=</span> <span class="s1">&#39;NCGD0011&#39;</span><span class="p">,</span>
    <span class="n">override</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The autoreload extension is already loaded. To reload it, use:
  %reload_ext autoreload
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:  csp_solver:CspSolver initialized.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-intense-fg ansi-bold">Creating case...</span>

• Updating ccs_config/modelgrid_aliases_nuopc.xml file to include the new resolution &#34;croc-case-three-boundary-nwa&#34; consisting of the following component grids.
 atm grid: &#34;TL319&#34;, lnd grid: &#34;TL319&#34;, ocn grid: &#34;nwa12&#34;.

• Updating ccs_config/component_grids_nuopc.xml file to include newly generated ocean grid &#34;nwa12&#34; with the following properties:
 nx: 769, ny: 795. ocean mesh: /glade/u/home/manishrv/croc_input/croc-case-three-boundary-nwa/ocnice/ESMF_mesh_nwa12_38ac18.nc.

<span class="ansi-cyan-intense-fg ansi-bold">Running the create_newcase tool with the following command:</span>

/glade/u/home/manishrv/documents/installs/clean_cesm3_0_alpha03a/cime/scripts/create_newcase --compset 1850_DATM%JRA_SLND_SICE_MOM6_SROF_SGLC_SWAV --res croc-case-three-boundary-nwa --case /glade/u/home/manishrv/cases/croc_cases/croc-case-three-boundary-nwa --machine derecho --run-unsupported --project NCGD0011

<span class="ansi-cyan-intense-fg ansi-bold">The create_newcase command was successful.</span>

<span class="ansi-cyan-intense-fg ansi-bold">Navigating to the case directory:</span>

cd /glade/u/home/manishrv/cases/croc_cases/croc-case-three-boundary-nwa

<span class="ansi-cyan-intense-fg ansi-bold">Running the case.setup script with the following command:</span>

./case.setup

<span class="ansi-cyan-intense-fg ansi-bold">Adding parameter changes to user_nl_mom:</span>

  ! Custom Horizonal Grid, Topography, and Vertical Grid
  INPUTDIR = /glade/u/home/manishrv/croc_input/croc-case-three-boundary-nwa/ocnice
  TRIPOLAR_N = False
  REENTRANT_X = False
  REENTRANT_Y = False
  NIGLOBAL = 769
  NJGLOBAL = 795
  GRID_CONFIG = mosaic
  GRID_FILE = ocean_hgrid_nwa12_38ac18.nc
  TOPO_CONFIG = file
  TOPO_FILE = ocean_topog_nwa12_38ac18.nc
  MAXIMUM_DEPTH = 8382.097163932149
  MINIMUM_DEPTH = 9.5
  NK = 75
  COORD_CONFIG = none
  ALE_COORDINATE_CONFIG = FILE:ocean_vgrid_nwa12_38ac18.nc
  REGRIDDING_COORDINATE_MODE = Z*

  ! Timesteps (based on grid resolution)
  DT = 50.0
  DT_THERM = 200.0

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:   stage:SUCCESS: All stages are complete.
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold">Case created successfully at /glade/u/home/manishrv/cases/croc_cases/croc-case-three-boundary-nwa.</span>

<span class="ansi-cyan-intense-fg ansi-bold">To further customize, build, and run the case, navigate to the case directory in your terminal. To create another case, restart the notebook.</span>

</pre></div></div>
</div>
</section>
</section>
<section id="Section-3:-Prepare-ocean-forcing-data">
<h1>Section 3: Prepare ocean forcing data<a class="headerlink" href="#Section-3:-Prepare-ocean-forcing-data" title="Link to this heading"></a></h1>
<p>We need to cut out our ocean forcing. The package expects an initial condition and one time-dependent segment per non-land boundary. Naming convention is <code class="docutils literal notranslate"><span class="pre">&quot;east_unprocessed&quot;</span></code> for segments and <code class="docutils literal notranslate"><span class="pre">&quot;ic_unprocessed&quot;</span></code> for the initial condition.</p>
<p>In this notebook, we are forcing with the Copernicus Marine “Glorys” reanalysis dataset. There’s a function in the <code class="docutils literal notranslate"><span class="pre">CrocoDash</span></code> package, called <code class="docutils literal notranslate"><span class="pre">configure_forcings</span></code>, that generates a bash script to download the correct boundary forcing files for your experiment. First, you will need to create an account with Copernicus, and then call <code class="docutils literal notranslate"><span class="pre">copernicusmarine</span> <span class="pre">login</span></code> to set up your login details on your machine. Then you can run the <code class="docutils literal notranslate"><span class="pre">get_glorys_data.sh</span></code> bash script.</p>
<section id="Step-3.1-Configure-Initial-Conditions-and-Forcings">
<h2>Step 3.1 Configure Initial Conditions and Forcings<a class="headerlink" href="#Step-3.1-Configure-Initial-Conditions-and-Forcings" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="o">.</span><span class="n">configure_forcings</span><span class="p">(</span>
    <span class="n">date_range</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;2020-01-01 00:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2020-02-01 00:00:00&quot;</span><span class="p">],</span>
    <span class="n">boundaries</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;south&quot;</span><span class="p">,</span> <span class="s2">&quot;north&quot;</span><span class="p">,</span><span class="s2">&quot;east&quot;</span><span class="p">],</span>
    <span class="n">tidal_constituents</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;M2&#39;</span><span class="p">],</span>
    <span class="n">tpxo_elevation_filepath</span> <span class="o">=</span> <span class="s2">&quot;/glade/u/home/manishrv/manish_scratch_symlink/inputs_rm6/tidal_data/h_tpxo9.v1.nc&quot;</span><span class="p">,</span>
    <span class="n">tpxo_velocity_filepath</span> <span class="o">=</span> <span class="s2">&quot;/glade/u/home/manishrv/manish_scratch_symlink/inputs_rm6/tidal_data/u_tpxo9.v1.nc&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Warning: Minimum depth of 9.5m is less than the depth of the third interface (22.111397215603525m)!
This means that some areas may only have one or two layers between the surface and sea floor.
For increased stability, consider increasing the minimum depth, or adjusting the vertical coordinate to add more layers near the surface.
The script `get_glorys_data.sh` has been generated at:
  /glade/u/home/manishrv/croc_input/croc-case-three-boundary-nwa/glorys.
To download the data, run this script using `bash` in a terminal with internet access.

Important instructions:
1. You will need your Copernicus Marine username and password.
   If you do not have an account, you can create one here:
   https://data.marine.copernicus.eu/register
2. You will be prompted to enter your Copernicus Marine credentials multiple times: once for each dataset.
3. Depending on the dataset size, the download process may take significant time and resources.
4. Thus, on certain systems, you may need to run this script as a batch job.

</pre></div></div>
</div>
</section>
<section id="Step-3.2-Run-get_glorys_data.sh">
<h2>Step 3.2 Run <code class="docutils literal notranslate"><span class="pre">get_glorys_data.sh</span></code><a class="headerlink" href="#Step-3.2-Run-get_glorys_data.sh" title="Link to this heading"></a></h2>
<p>In a terminal session, locate the <code class="docutils literal notranslate"><span class="pre">get_glorys_data.sh</span></code> script and execute it to download the initial conditions and boundary conditions. Follow the instructions printed by the <code class="docutils literal notranslate"><span class="pre">configure_forcings</span></code> method above.</p>
<p><strong>TODO:</strong> user copernicusmarine python API within CrocoDash, instead of directing users to run it via CLI. Also, on a derecho login node, both CLI and API fails to run due to the computational demand. We also need to address that.</p>
</section>
<section id="Step-3.3:-Process-forcing-data">
<h2>Step 3.3: Process forcing data<a class="headerlink" href="#Step-3.3:-Process-forcing-data" title="Link to this heading"></a></h2>
<p>In this final step, we call the <code class="docutils literal notranslate"><span class="pre">process_forcings</span></code> method of CrocoDash to cut out and interpolate the initial condition as well as all boundaries. CrocoDash also updates MOM6 runtime parameters and CESM xml variables accordingly.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="o">.</span><span class="n">process_forcings</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Getting t points..
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Setting up Initial Conditions
Regridding Velocities...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Getting u points..
INFO:regional_mom6.regridding:Getting v points..
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done.
Regridding Tracers... Done.
Regridding Free surface... Done.
Saving outputs...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
done setting up initial condition.
NOTE: the &#39;setup_run_directories&#39; method does understand the less than four boundaries but be careful. Please check the MOM_input/override file carefully to reflect the number of boundaries you have, and their orientations. You should be able to find the relevant section in the MOM_input/override file by searching for &#39;segment_&#39;. Ensure that the segment names match those in your inputdir/forcing folder
Processing south boundary...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in salt_segment_001
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to salt_segment_001
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in temp_segment_001
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to temp_segment_001
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in u_segment_001
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to u_segment_001
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in v_segment_001
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to v_segment_001
INFO:regional_mom6.regridding:Adding perpendicular dimension to eta_segment_001
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done.
Processing north boundary...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in salt_segment_002
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to salt_segment_002
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in temp_segment_002
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to temp_segment_002
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in u_segment_002
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to u_segment_002
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in v_segment_002
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to v_segment_002
INFO:regional_mom6.regridding:Adding perpendicular dimension to eta_segment_002
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done.
Processing east boundary...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in salt_segment_003
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to salt_segment_003
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in temp_segment_003
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to temp_segment_003
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in u_segment_003
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to u_segment_003
INFO:regional_mom6.regridding:Renaming vertical coordinate to nz_... in v_segment_003
INFO:regional_mom6.regridding:Replacing old depth coordinates with incremental integers
INFO:regional_mom6.regridding:Adding perpendicular dimension to v_segment_003
INFO:regional_mom6.regridding:Adding perpendicular dimension to eta_segment_003
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Processing south boundary...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Adding perpendicular dimension to zamp_segment_001
INFO:regional_mom6.regridding:Adding perpendicular dimension to zphase_segment_001
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Adding perpendicular dimension to uamp_segment_001
INFO:regional_mom6.regridding:Adding perpendicular dimension to vamp_segment_001
INFO:regional_mom6.regridding:Adding perpendicular dimension to uphase_segment_001
INFO:regional_mom6.regridding:Adding perpendicular dimension to vphase_segment_001
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done
Processing north boundary...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Adding perpendicular dimension to zamp_segment_002
INFO:regional_mom6.regridding:Adding perpendicular dimension to zphase_segment_002
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Adding perpendicular dimension to uamp_segment_002
INFO:regional_mom6.regridding:Adding perpendicular dimension to vamp_segment_002
INFO:regional_mom6.regridding:Adding perpendicular dimension to uphase_segment_002
INFO:regional_mom6.regridding:Adding perpendicular dimension to vphase_segment_002
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Creating Regridder
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done
Processing east boundary...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Adding perpendicular dimension to zamp_segment_003
INFO:regional_mom6.regridding:Adding perpendicular dimension to zphase_segment_003
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Creating Regridder
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Adding time dimension
INFO:regional_mom6.regridding:Filling in missing data horizontally, then vertically
INFO:regional_mom6.regridding:Creating coordinates of the boundary q/u/v points
INFO:regional_mom6.regridding:Adding perpendicular dimension to uamp_segment_003
INFO:regional_mom6.regridding:Adding perpendicular dimension to vamp_segment_003
INFO:regional_mom6.regridding:Adding perpendicular dimension to uphase_segment_003
INFO:regional_mom6.regridding:Adding perpendicular dimension to vphase_segment_003
WARNING:regional_mom6.regridding:All NaNs filled b/c bathymetry wasn&#39;t provided to the function. Add bathymetry_path to the segment class to avoid this
INFO:regional_mom6.regridding:Generating encoding dictionary
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Done
<span class="ansi-cyan-intense-fg ansi-bold">Adding parameter changes to user_nl_mom:</span>

  ! Initial conditions
  INIT_LAYERS_FROM_Z_FILE = True
  TEMP_SALT_Z_INIT_FILE = init_tracers.nc
  Z_INIT_FILE_PTEMP_VAR = temp
  Z_INIT_ALE_REMAPPING = True
  TEMP_SALT_INIT_VERTICAL_REMAP_ONLY = True
  DEPRESS_INITIAL_SURFACE = True
  SURFACE_HEIGHT_IC_FILE = init_eta.nc
  SURFACE_HEIGHT_IC_VAR = eta_t
  VELOCITY_CONFIG = file
  VELOCITY_FILE = init_vel.nc

  ! Tides
  TIDES = True
  TIDE_M2 = True
  CD_TIDES = 0.0018
  TIDE_USE_EQ_PHASE = True
  TIDE_REF_DATE = 2020, 1, 1
  OBC_TIDE_ADD_EQ_PHASE = True
  OBC_TIDE_N_CONSTITUENTS = 1
  OBC_TIDE_CONSTITUENTS = &#34;M2&#34;
  OBC_TIDE_REF_DATE = 2020, 1, 1

  ! Open boundary conditions
  OBC_NUMBER_OF_SEGMENTS = 3
  OBC_FREESLIP_VORTICITY = False
  OBC_FREESLIP_STRAIN = False
  OBC_COMPUTED_VORTICITY = True
  OBC_COMPUTED_STRAIN = True
  OBC_ZERO_BIHARMONIC = True
  OBC_TRACER_RESERVOIR_LENGTH_SCALE_OUT = 3.0E+04
  OBC_TRACER_RESERVOIR_LENGTH_SCALE_IN = 3000.0
  BRUSHCUTTER_MODE = True
  OBC_SEGMENT_001 = &#34;J=0,I=0:N,FLATHER,ORLANSKI,NUDGED,ORLANSKI_TAN,NUDGED_TAN&#34;
  OBC_SEGMENT_001_VELOCITY_NUDGING_TIMESCALES = 0.3, 360.0
  OBC_SEGMENT_001_DATA = &#34;U=file:forcing_obc_segment_001.nc(u),V=file:forcing_obc_segment_001.nc(v),SSH=file:forcing_obc_segment_001.nc(eta),TEMP=file:forcing_obc_segment_001.nc(temp),SALT=file:forcing_obc_segment_001.nc(salt),Uamp=file:tu_segment_001.nc(uamp),Uphase=file:tu_segment_001.nc(uphase),Vamp=file:tu_segment_001.nc(vamp),Vphase=file:tu_segment_001.nc(vphase),SSHamp=file:tz_segment_001.nc(zamp),SSHphase=file:tz_segment_001.nc(zphase)&#34;
  OBC_SEGMENT_002 = &#34;J=N,I=N:0,FLATHER,ORLANSKI,NUDGED,ORLANSKI_TAN,NUDGED_TAN&#34;
  OBC_SEGMENT_002_VELOCITY_NUDGING_TIMESCALES = 0.3, 360.0
  OBC_SEGMENT_002_DATA = &#34;U=file:forcing_obc_segment_002.nc(u),V=file:forcing_obc_segment_002.nc(v),SSH=file:forcing_obc_segment_002.nc(eta),TEMP=file:forcing_obc_segment_002.nc(temp),SALT=file:forcing_obc_segment_002.nc(salt),Uamp=file:tu_segment_002.nc(uamp),Uphase=file:tu_segment_002.nc(uphase),Vamp=file:tu_segment_002.nc(vamp),Vphase=file:tu_segment_002.nc(vphase),SSHamp=file:tz_segment_002.nc(zamp),SSHphase=file:tz_segment_002.nc(zphase)&#34;
  OBC_SEGMENT_003 = &#34;I=N,J=0:N,FLATHER,ORLANSKI,NUDGED,ORLANSKI_TAN,NUDGED_TAN&#34;
  OBC_SEGMENT_003_VELOCITY_NUDGING_TIMESCALES = 0.3, 360.0
  OBC_SEGMENT_003_DATA = &#34;U=file:forcing_obc_segment_003.nc(u),V=file:forcing_obc_segment_003.nc(v),SSH=file:forcing_obc_segment_003.nc(eta),TEMP=file:forcing_obc_segment_003.nc(temp),SALT=file:forcing_obc_segment_003.nc(salt),Uamp=file:tu_segment_003.nc(uamp),Uphase=file:tu_segment_003.nc(uphase),Vamp=file:tu_segment_003.nc(vamp),Vphase=file:tu_segment_003.nc(vphase),SSHamp=file:tz_segment_003.nc(zamp),SSHphase=file:tz_segment_003.nc(zphase)&#34;

./xmlchange RUN_STARTDATE=2020-01-01

./xmlchange MOM6_MEMORY_MODE=dynamic_symmetric

Case is ready to be built: /glade/u/home/manishrv/cases/croc_cases/croc-case-three-boundary-nwa
</pre></div></div>
</div>
</section>
</section>
<section id="Section-4:-Build-and-run-the-case">
<h1>Section 4: Build and run the case<a class="headerlink" href="#Section-4:-Build-and-run-the-case" title="Link to this heading"></a></h1>
<p>After completing the previous steps, you are ready to build and run your CESM case. Begin by navigating to the case root directory specified during the case creation. Before proceeding, review the <code class="docutils literal notranslate"><span class="pre">user_nl_mom</span></code> file located in the case directory. This file contains MOM6 parameter settings that were automatically generated by CrocoDash. Carefully examine these parameters and make any necessary adjustments to fine-tune the model for your specific requirements. While CrocoDash aims to provide a
solid starting point, further tuning and adjustments are typically necessary to improve the model for your use case.</p>
<p>Once you have reviewed and modified the parameters as needed, you can prepare, build, and execute the case using the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./case.setup
./case.build
./case.submit
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="minimal_demo_subset_global.html" class="btn btn-neutral float-left" title="Set up a global gridded subset regional CESM-MOM6 run" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="minimal_demo_three_boundary_from_t232.html" class="btn btn-neutral float-right" title="Set up a low res three boundary regional CESM-MOM6 run" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CROCODILE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>